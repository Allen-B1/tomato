<!DOCTYPE html>
<html>
	<head>
		<style>
body {
	background: #ff3311;
	color: #fff;
	font-family: 'Roboto', sans-serif;
	font-size: 14px;
	padding: 0; margin: 0;
}
h3 {
	font-family: 'Raleway', 'Roboto', sans-serif;
	font-size: 20px;
}
main {
	text-align: center;
	padding: 16px;
}

@media (min-width:750px) {
	body {
		background: #eee;
	}
	main {
		max-width: 500px;
		background: #ff3311;
		margin: auto;
		margin-top: 32px;
		border-radius: 2px;
		box-shadow: 0 2px 2px rgba(0,0,0,0.1);
	}
}
		</style>
	</head>
	<body>
		<main>
			<h3>work</h3>
			<p id="time"></p>
			<button id="next" type="button">Skip</button>
		</main>

		<script>
function formatTime(time /*number*/) /*string*/ {
	time = Math.floor(time);
	if (time >= 60) 
		return Math.floor(time / 60) + "m" + (time % 60) + "s";
	return time + "s";
}

const Interval = {
	BREAK_L: "long break",
	BREAK: "short break",
	WORK: "work"
};

Interval.duration = function(interval) {
	return interval == Interval.BREAK_L ? 15 :
		interval == Interval.BREAK ? 5 :
		interval == Interval.WORK ? 30 :
		0
}

function* IntervalGenerator() {
	var iterations = 0; // # of iterations
	for (;;) {
		yield Interval.WORK;
		iterations++;
		yield iterations % 4 == 0 ? Interval.BREAK_L : Interval.BREAK; 
	}
}

var gen = IntervalGenerator();
var next_button = document.getElementById("next");
var time_text = document.getElementById("time");
var interval = -1;

function nextItem() {
	clearInterval(interval);
	
	var duration = Interval.duration(gen.next().value) * 60;
	time_text.innerHTML = formatTime(duration);
	var startTime = Date.now();
	
	interval = setInterval(function() {
		var secs = (Date.now() - startTime) / 1000; // # of seconds passed
		var remaining = duration - secs;
		time_text.innerHTML = formatTime(remaining);
	}, 1000);
}

next_button.addEventListener("click", nextItem);
nextItem();
		</script>
	</body>
</html>